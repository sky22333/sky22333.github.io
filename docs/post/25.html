<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    <script src='https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'></script>
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/sky22333/sky22333.github.io@main/static/assets/blog.png"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="### clash手搓配置全部协议示例，附带详细注释说明，小白也会手搓


- [clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)

---
---

- 🔵本地配置，`clash-verge-rev`为例：

打开`clash-verge-rev` → 订阅 → 新建 → 类型选择`Local` → 名称自定义 → 点击保存 → 右键点击该配置 → 编辑文件 → 复制配置 → 修改保存

---
---

- 🔵云端配置：

1：部署一个站点，站点目录里创建`clash.yaml`文件

2：使用`caddy`代理站点目录，例如你的`clash.yaml`配置放在`/var/www`下，增加相应的权限

3：则`caddy`可以这样配置：
```
example.com {
    root * /var/www
    encode zstd gzip
    file_server
}
```

4：部署完成后就可以远程拉取订阅，订阅地址示例：
```
https://example.com/clash.yaml
```


5：如果你已经有一个现成的站点，则直接将`clash.yaml`配置放在站点目录即可，其他同理。">
<meta property="og:title" content="clash手搓配置最全协议示例详解">
<meta property="og:description" content="### clash手搓配置全部协议示例，附带详细注释说明，小白也会手搓


- [clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)

---
---

- 🔵本地配置，`clash-verge-rev`为例：

打开`clash-verge-rev` → 订阅 → 新建 → 类型选择`Local` → 名称自定义 → 点击保存 → 右键点击该配置 → 编辑文件 → 复制配置 → 修改保存

---
---

- 🔵云端配置：

1：部署一个站点，站点目录里创建`clash.yaml`文件

2：使用`caddy`代理站点目录，例如你的`clash.yaml`配置放在`/var/www`下，增加相应的权限

3：则`caddy`可以这样配置：
```
example.com {
    root * /var/www
    encode zstd gzip
    file_server
}
```

4：部署完成后就可以远程拉取订阅，订阅地址示例：
```
https://example.com/clash.yaml
```


5：如果你已经有一个现成的站点，则直接将`clash.yaml`配置放在站点目录即可，其他同理。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.52013120.xyz/post/25.html">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sky22333/sky22333.github.io@main/static/assets/blog.png">
<title>clash手搓配置最全协议示例详解</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">clash手搓配置最全协议示例详解</h1>
<div class="title-right">
    <a href="https://blog.52013120.xyz" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h3>clash手搓配置全部协议示例，附带详细注释说明，小白也会手搓</h3>
<ul>
<li><a href="https://github.com/clash-verge-rev/clash-verge-rev">clash-verge-rev</a></li>
</ul>
<hr>
<hr>
<ul>
<li>🔵本地配置，<code class="notranslate">clash-verge-rev</code>为例：</li>
</ul>
<p>打开<code class="notranslate">clash-verge-rev</code> → 订阅 → 新建 → 类型选择<code class="notranslate">Local</code> → 名称自定义 → 点击保存 → 右键点击该配置 → 编辑文件 → 复制配置 → 修改保存</p>
<hr>
<hr>
<ul>
<li>🔵云端配置：</li>
</ul>
<p>1：部署一个站点，站点目录里创建<code class="notranslate">clash.yaml</code>文件</p>
<p>2：使用<code class="notranslate">caddy</code>代理站点目录，例如你的<code class="notranslate">clash.yaml</code>配置放在<code class="notranslate">/var/www</code>下，增加相应的权限</p>
<p>3：则<code class="notranslate">caddy</code>可以这样配置：</p>
<pre class="notranslate"><code class="notranslate">example.com {
    root * /var/www
    encode zstd gzip
    file_server
}
</code></pre>
<p>4：部署完成后就可以远程拉取订阅，订阅地址示例：</p>
<pre class="notranslate"><code class="notranslate">https://example.com/clash.yaml
</code></pre>
<p>5：如果你已经有一个现成的站点，则直接将<code class="notranslate">clash.yaml</code>配置放在站点目录即可，其他同理。</p>
<p>6：为了节点的安全起见，建议手动本地配置，如果你想分享给你的好友拉取订阅，拉取配置成功后可以将<code class="notranslate">clash.yaml</code>文件的读取权限全部取消。</p>
<hr>
<hr>
<ul>
<li>🔵15个协议配置示例</li>
</ul>
<pre class="notranslate"><code class="notranslate">#（一区）=============================（clash配置）
#dns可自行修改
port: 7890
allow-lan: true
mode: rule
log-level: info
unified-delay: true
global-client-fingerprint: chrome
dns:
  enable: true
  listen: :53
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver: 
    - 223.5.5.5
    - 8.8.8.8
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fallback:
    - https://1.0.0.1/dns-query
    - tls://dns.google
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4


#（二区）==============================（代理协议）
#当前所有协议节点配置模版，按需求修改，如某协议节点不用，则无需删除，确保三区代理分流中没有该name节点名称即可
proxies:
#==============================（shadowsocks节点）
- name: shadowsocks节点                                       # 可自定义名称
  type: ss
  server: 1.2.3.4                                            # 服务器IP
  port: 8388                                                 # 服务器端口
  cipher: chacha20-ietf-poly1305                             # 加密方式，可根据需求更改
  password: yourpassword                                     # 密码
  udp: true                                                  # 是否启用UDP，可选

#==============================（SOCKS5节点）
- name: socks5节点                                            # 可自定义名称
  type: socks5
  server: 1.2.3.4                                            # 服务器IP
  port: 9527                                                 # 服务器端口
  username: yourusername                                     # 用户名（如果需要）
  password: yourpassword                                     # 密码（如果需要）
  udp: true                                                  # 是否启用UDP，可选

#==============================（vless-reality-vision节点）
- name: vless-reality-vision节点               #可自定义名称
  type: vless
  server: 1.2.3.4                             #解析的域名或IP
  port: 12345                                 #自定义的端口
  uuid: f897325d-053d-45d1-899c-566692331f8   #自定义的uuid
  network: tcp
  udp: true
  tls: true
  flow: xtls-rprx-vision
  servername: www.tesla.com                   #自定义的第三方域名
  reality-opts: 
    public-key: 4CiE7y7ZPBXIZWzMwphuSH7qdZyisNjD3CDQGjmilmI    #自定义的public-key
    short-id: a8c031ce                        #自定义的short-id
  client-fingerprint: chrome                  #自定义的浏览器指纹

#==============================（vless-reality-grpc节点）
- name: vless-reality-grpc节点                  #可自定义名称
  type: vless
  server: 1.2.3.4                               #解析的域名或IP
  port: 12345                                   #自定义的端口
  uuid: 335ec5dd-61b1-4413-980e-5e009968f633    #自定义的uuid
  network: grpc
  tls: true
  udp: true
  flow:
  client-fingerprint: chrome                    #自定义的浏览器指纹
  servername: www.tesla.com                     #自定义的第三方域名
  grpc-opts:
    grpc-service-name: "abcd"                  #" "内自定义的字符
  reality-opts:
    public-key: Aqp9oy2EFi4NNfRMZa3I3HdGhHbOIiSDZ8L28UCF73k    #自定义的public-key
    short-id: 24410d1c                          #自定义的short-id

#==============================（vless-xtls-rprx-vision节点）
- name: vless-xtls-rprx-vision节点              #可自定义名称
  type: vless
  server: example.com                      #解析的域名
  port: 12345                                  #自定义的端口
  uuid: 5f74f86b-3ee8-44f4-adc4-6666be3d315    #自定义的uuid
  network: tcp
  tls: true
  udp: true
  flow: xtls-rprx-vision
  client-fingerprint: chrome

#==============================（vless-ws-tls节点）
- name: vless-ws-tls节点                           #可自定义名称
  type: vless
  server: example.com                          #解析的域名或者优选域名IP
  port: 12345                                      #自定义的端口
  uuid: 3cc9a51c-db76-4ad2-a76b-8cb993bddb73       #自定义的uuid
  udp: true
  tls: true
  network: ws
  servername: abc.abcd.eu.org                     #sni域名，与下面的host一致
  ws-opts:
    path: "/?ed=2560"                              #" "内自定义的path路径
    headers:
      Host: abc.abcd.eu.org                       #host域名，与上面的servername一致

#==============================（vless-ws节点）
- name: vless-ws节点                               #可自定义名称
  type: vless
  server: example.com                          #解析的域名或者优选域名IP
  port: 8880                                       #自定义的端口
  uuid: 77a571fb-4fd2-4b37-8596-1b7d9728bb5c       #自定义的uuid
  udp: true
  tls: false
  network: ws
  servername: abc.abcd.eu.org                     #sni域名，与下面的host一致
  ws-opts:
    path: "/?ed=2560"                              #" "内自定义的path路径
    headers:
      Host: abc.abcd.eu.org                       #host域名，与上面的servername一致

#==============================（vmess-ws-tls节点）
- name: vmess-ws-tls节点                           #可自定义名称
  type: vmess
  server: example.com                          #解析的域名或者优选域名IP
  port: 12345                                      #自定义的端口
  uuid: 3cc9a51c-db76-4ad2-a76b-8cb993bddb73       #自定义的uuid
  alterId: 0
  cipher: auto
  udp: true
  tls: true
  network: ws
  servername: abc.abcd.eu.org                     #sni域名，与下面的host一致
  ws-opts:
    path: "/?ed=2560"                              #自定义的path路径
    headers:
      Host: abc.abcd.eu.org                       #host域名，与上面的servername一致

#==============================（vmess-ws节点）
- name: vmess-ws节点                               #可自定义名称
  type: vmess
  server: example.com                          #解析的域名或者优选域名IP
  port: 8880                                       #自定义的端口
  uuid: 77a571fb-4fd2-4b37-8596-1b7d9728bb5c       #自定义的uuid
  alterId: 0
  cipher: auto
  udp: true
  tls: false
  network: ws
  servername: abc.abcd.eu.org                     #sni域名，与下面的host一致
  ws-opts:
    path: "/?ed=2560"                              #" "内自定义的path路径
    headers:
      Host: abc.abcd.eu.org                       #host域名，与上面的servername一致

#==============================（trojan-tcp-tls节点）
- name: trojan-tcp-tls节点                         #可自定义名称
  type: trojan
  server: example.com                          #解析的域名
  port: 12345                                      #自定义的端口
  password: 123456789                              #自定义的密码
  client-fingerprint: chrome
  udp: true
  sni: example.com                             #sni域名，与上面server地址一致
  alpn:
    - h2
    - http/1.1
  skip-cert-verify: false

#==============================（hysteria2证书节点）
- name: hysteria2证书节点                            #可自定义名称
  type: hysteria2 
  server: example.com                            #解析的域名
  port: 12345                                        #自定义的端口，不支持多端口
  password: 123456                                   #自定义的密码
  obfs: salamander                                   #obfs混淆开启，未开启请删除此行
  obfs-password: 123456                              #obfs混淆密码，未开启请删除此行
  alpn:
    - h3
  sni: example.com                               #sni域名，与上面server地址一致 
  skip-cert-verify: false
  fast-open: true

#==============================（hysteria2自签节点）
- name: hysteria2自签节点                             #可自定义名称
  type: hysteria2                                      
  server: 1.2.3.4                                     #服务器本地IP
  port: 12345                                         #自定义的端口，不支持多端口
  password: 123456                                    #自定义的密码 
  obfs: salamander                                    #obfs混淆开启，未开启请删除此行 
  obfs-password: 123456                               #obfs混淆密码，未开启请删除此行     
  alpn:
    - h3
  sni: www.bing.com                                    #自签证书
  skip-cert-verify: true
  fast-open: true
    
#==============================（tuic-V5证书节点）
- name: tuic-V5证书节点                              #可自定义名称
  server: example.com                          #解析的域名或IP
  port: 12345                                      #自定义的端口
  type: tuic
  uuid: a806923b-737c-4581-8b13-56666f911866       #自定义的uuid
  password: a806923b-737c-4581-8b13-56666f911866   #自定义的密码
  alpn: [h3]
  disable-sni: true
  reduce-rtt: true
  udp-relay-mode: native
  congestion-controller: bbr
  sni: example.com                            #sni域名，与上面server地址一致     
  skip-cert-verify: false


#==============================（tuic-V5自签节点）
- name: tuic-V5自签节点                              #可自定义名称
  server: 1.2.3.4                                   #服务器本地IP
  port: 12345                                       #自定义的端口
  type: tuic
  uuid: a806923b-737c-4581-8b13-56666f911866       #自定义的uuid
  password: a806923b-737c-4581-8b13-56666f911866   #自定义的密码
  alpn: [h3]
  disable-sni: true
  reduce-rtt: true
  udp-relay-mode: native
  congestion-controller: bbr
  sni: www.bing.com                                 #自签证书   
  skip-cert-verify: true
  

#==============================（warp-wireguard节点）  
- name: warp-wireguard节点                                   #可自定义名称
  type: wireguard         
  server: 162.159.193.10                                     #可自定义优选对端IP，与下面port的端口相对应
  port: 2408                                                 #可自定义优选对端IP，与上面server的IP相对应
  ip: 172.16.0.2
  ipv6: 2606:4700:190:814e:7de3:5ddb:9d3e:9359               #与private-key相对应，如删除本行，表示仅IPV4
  public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
  private-key: gK3C8ijdVlT7sd5fsdf5ssdfgsdfgsdfgobT2U+rgHo=  #获取private-key，私key
  udp: true



#（三区）==============================（代理分流）
#分流组可自行创建添加，proxies参数下的name节点名称，按需求自行增减，确保出现的name节点名称在二区代理协议中可查找
proxy-groups:
- name: 负载均衡
  type: load-balance
  url: https://cp.cloudflare.com/generate_204
  interval: 300
  strategy: round-robin
  proxies:
    - warp-wireguard节点                                  #自定义添加协议的name字段
    - vless-ws-tls节点
    - vless-ws节点

- name: 自动选择
  type: url-test
  url: https://cp.cloudflare.com/generate_204
  interval: 300
  tolerance: 50
  proxies:
    - vless-reality-vision节点                            #自定义添加协议的name字段
    - vless-reality-grpc节点
    
- name: 🌍选择代理节点
  type: select
  proxies:
    - 负载均衡                                            #自定义添加协议的name字段
    - 自动选择
    - DIRECT
    - shadowsocks节点
    - socks5节点
    - vless-reality-vision节点                                    
    - vless-reality-grpc节点
    - vless-xtls-rprx-vision节点
    - vless-ws-tls节点
    - vless-ws节点
    - vmess-ws-tls节点
    - vmess-ws节点
    - trojan-tcp-tls节点
    - hysteria2证书节点
    - hysteria2自签节点
    - tuic-V5证书节点
    - tuic-V5自签节点 
    - warp-wireguard节点

# ==============================（常见流量处理方式）==============================
# DIRECT: 流量直接连接，无需代理。
# PROXY/选择代理节点: 流量通过指定的代理节点转发。
# REJECT: 拒绝特定流量。

# ==============================（常见匹配规则类型）==============================
# GEOIP: 根据 IP 的地理位置匹配流量（例如，来自特定国家或地区的流量）。
# DOMAIN-SUFFIX: 基于域名后缀（如 example.com）匹配流量。
# DOMAIN-KEYWORD: 基于域名中的关键词匹配流量。
# IP-CIDR: 根据 IP 范围匹配流量。
# MATCH: 匹配所有流量，通常作为默认策略。

#==============================（四区）==============================（代理规则示例）
rules:
  - GEOIP,LAN,DIRECT                        # 局域网流量直连
  - GEOIP,CN,DIRECT                         # 中国大陆流量直连
  - DOMAIN-SUFFIX,google.com,🌍选择代理节点  # 针对特定域名的流量使用代理
  - DOMAIN-KEYWORD,facebook,🌍选择代理节点   # 针对包含特定关键词的域名使用代理
  - DOMAIN-SUFFIX,youtube.com,🌍选择代理节点 # 针对 YouTube 流量使用代理
  - DOMAIN-SUFFIX,instagram.com,🌍选择代理节点 # 针对 Instagram 流量使用代理
  - IP-CIDR,192.168.0.0/16,DIRECT           # 指定 IP 范围的流量直连
  - IP-CIDR,10.0.0.0/8,DIRECT               # 指定 IP 范围直连
  - GEOIP,US,🌍选择代理节点                 # 针对美国地区的流量使用代理
  - GEOIP,JP,🌍选择代理节点                 # 针对日本地区的流量使用代理
  - MATCH,🌍选择代理节点                    # 其他所有流量走代理
</code></pre>
<hr>
<ul>
<li>🔵客户端多入站对应多出站配置示例</li>
</ul>
<pre class="notranslate"><code class="notranslate"># 客户端多入站对应多出站配置示例
# 基本配置
port: 7890                # HTTP 代理端口
socks-port: 7891          # 全局 SOCKS5 代理端口
allow-lan: true           # 允许局域网连接
mode: rule                # 规则模式
log-level: info           # 日志级别
external-controller: :9090 # 外部控制器端口

# 监听器配置
listeners:
  - name: "SOCKS5 Inbound 1"
    type: socks
    port: 7891                            # 入站端口
    rule: "FINAL,🇺🇸 VLESS美国"  # 将所有流量转发到美国 VLESS 节点

  - name: "SOCKS5 Inbound 2"
    type: socks
    port: 7892                         # 入站端口
    rule: "FINAL,🇯🇵 SS日本"     # 将所有流量转发到日本 Shadowsocks 节点

  - name: "SOCKS5 Inbound 3"
    type: socks
    port: 7893                           # 入站端口
    rule: "FINAL,🇬🇧 HY2英国"    # 将所有流量转发到英国 Hysteria2 节点

  - name: "SOCKS5 Inbound 4"
    type: socks
    port: 7894                            # 入站端口
    rule: "FINAL,🇭🇰 香港reality" # 将所有流量转发到香港 REALITY 节点

# 代理配置
proxies:
  - name: 🇺🇸 VLESS美国
    type: vless
    server: www.example1.com  # 服务器地址
    port: 443                 # 服务器端口
    uuid: e0256bbf-8aa2-4e51-96b4-c022f029564a  # 用户 UUID
    tls: true                 # 启用 TLS
    servername: example1.com  # TLS SNI
    network: ws               # 使用 WebSocket
    ws-opts:
      path: /path             # WebSocket 路径
      headers:
        Host: example1.com    # WebSocket Host 头
    udp: true                 # 启用 UDP

  - name: 🇯🇵 SS日本
    type: ss
    server: www.example2.com  # 服务器地址
    port: 8388                # 服务器端口
    cipher: aes-256-gcm       # 加密方式
    password: your_password   # 密码
    udp: true                 # 启用 UDP

  - name: 🇬🇧 HY2英国
    type: hysteria2
    server: www.example3.com  # 服务器地址
    port: 443                 # 服务器端口
    password: your_password   # 密码
    alpn:
      - h3                    # ALPN 协商协议
    sni: example3.com         # SNI
    skip-cert-verify: false   # 是否跳过证书验证
    hopinterval: 10           # Hop 间隔

  # VLESS REALITY XTLS Vision 节点
  - name: 🇭🇰 香港reality
    type: vless
    server: example4.com      # 服务器地址
    port: 443                 # 服务器端口
    uuid: 12345678-1234-1234-1234-123456789012  # 用户 UUID
    network: tcp              # 使用 TCP
    tls: true                 # 启用 TLS
    udp: true                 # 启用 UDP
    flow: xtls-rprx-vision    # 使用 XTLS Vision 流控
    client-fingerprint: chrome # 客户端指纹
    servername: www.swift.com  # REALITY 伪装域名
    reality-opts:
      public-key: yourPublicKey    # REALITY 公钥
      short-id: yourShortId        # REALITY short-id

# 代理组配置
proxy-groups:
  - name: 🚀 节点选择
    type: select              # 选择类型，允许手动选择
    proxies:
      - 🇺🇸 VLESS美国
      - 🇯🇵 SS日本
      - 🇬🇧 HY2英国
      - 🇭🇰 香港reality
      - DIRECT                # 直连选项

# 规则配置
rules:
  - MATCH,🚀 节点选择         # 匹配所有流量，转发到节点选择组

# 其他规则配置
</code></pre>
<hr>
<hr>
<h3>参数讲解</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名称(全局配置)</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>mixed-port</td>
<td>HTTP(S) 和 SOCKS4(A)/SOCKS5 代理服务共用一个端口</td>
</tr>
<tr>
<td>allow-lan</td>
<td>设置为 true 以允许局域网的连接（可用来共享代理）</td>
</tr>
<tr>
<td>bind-address</td>
<td>仅当 allow-lan 为 true 时有效</td>
</tr>
<tr>
<td>ipv6</td>
<td>当设置为 false 时, 解析器不会将主机名解析为 IPv6 地址</td>
</tr>
<tr>
<td>mode</td>
<td>Clash 路由工作模式</td>
</tr>
<tr>
<td>log-level</td>
<td>日志级别: info / warning / error / debug / silent</td>
</tr>
<tr>
<td>external-controller</td>
<td>RESTful Web API 监听地址</td>
</tr>
<tr>
<td>secret</td>
<td>RESTful API 的口令(可选)</td>
</tr>
<tr>
<td>dns</td>
<td>DNS 服务设置</td>
</tr>
<tr>
<td>proxies</td>
<td>代理节点</td>
</tr>
<tr>
<td>proxy-groups</td>
<td>策略组</td>
</tr>
<tr>
<td>rules</td>
<td>分流规则</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名称(DNS配置)</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td>是否启动自定义dns模块</td>
</tr>
<tr>
<td>prefer-h3</td>
<td>是否优先使用 DOH 的 http/3</td>
</tr>
<tr>
<td>use-hosts</td>
<td>是否查询配置中的 hosts</td>
</tr>
<tr>
<td>use-system-hosts</td>
<td>是否查询系统 hosts</td>
</tr>
<tr>
<td>respect-rules</td>
<td>dns 连接跟随 rules，需配置proxy-server-nameserver</td>
</tr>
<tr>
<td>listen</td>
<td>DNS 服务监听，仅支持 udp</td>
</tr>
<tr>
<td>ipv6</td>
<td>是否解析 IPV6, 如为 false, 则回应 AAAA 的空解析</td>
</tr>
<tr>
<td>enhanced-mode</td>
<td>DNS 处理模式</td>
</tr>
<tr>
<td>fake-ip-range</td>
<td>fakeip 下的 IP 段设置</td>
</tr>
<tr>
<td>fake-ip-filter</td>
<td>fakeip 过滤，以下地址不会下发 fakeip 映射用于连接</td>
</tr>
<tr>
<td>default-nameserver</td>
<td>默认 DNS, 用于解析nameserver中的加密 dns</td>
</tr>
<tr>
<td>nameserver-policy</td>
<td>指定域名查询的解析服务器，可使用 geosite</td>
</tr>
<tr>
<td>nameserver</td>
<td>默认的域名解析服务器</td>
</tr>
<tr>
<td>proxy-server-nameserver</td>
<td>代理节点域名解析服务器</td>
</tr>
<tr>
<td>fallback</td>
<td>后备域名解析服务器</td>
</tr>
<tr>
<td>fallback-filter</td>
<td>后备域名解析服务器筛选</td>
</tr>
<tr>
<td>geoip</td>
<td>是否启用 fallback filter</td>
</tr>
<tr>
<td>geoip-code</td>
<td>可选值为 国家缩写</td>
</tr>
<tr>
<td>geosite</td>
<td>可选值为 geosite 内包含的集合</td>
</tr>
<tr>
<td>ipcidr</td>
<td>书写内容为 IP/掩码</td>
</tr>
<tr>
<td>domain</td>
<td>这些域名被视为已污染，匹配到这些域名，会直接使用 fallback解析</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名称(策略组配置)</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>策略组的名字</td>
</tr>
<tr>
<td>type</td>
<td>策略组的类型</td>
</tr>
<tr>
<td>proxies</td>
<td>引入代理节点或其他策略组</td>
</tr>
<tr>
<td>url</td>
<td>健康检查测试地址</td>
</tr>
<tr>
<td>interval</td>
<td>健康检查间隔，如不为 0 则启用定时测试，单位为秒</td>
</tr>
<tr>
<td>lazy</td>
<td>懒惰状态，默认为true,未选择到当前策略组时，不进行测试</td>
</tr>
<tr>
<td>timeout</td>
<td>健康检查超时时间，单位为毫秒</td>
</tr>
<tr>
<td>max-failed-times</td>
<td>最大失败次数，超过则触发一次强制健康检查</td>
</tr>
<tr>
<td>tolerance</td>
<td>节点切换容差，单位 ms</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<blockquote>
<p>策略组是我们选择哪个网站选用什么方式连接的前置条件，简而言之就是给你的节点如何分流进行分组。</p>
</blockquote>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>匹配方式(分流规则)</th>
<th>匹配内容</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>DOMAIN</td>
<td>匹配完整域名</td>
<td>ad.com</td>
</tr>
<tr>
<td>DOMAIN-SUFFIX</td>
<td>匹配域名后缀</td>
<td>google.com</td>
</tr>
<tr>
<td>DOMAIN-KEYWORD</td>
<td>使用域名关键字匹配</td>
<td>google</td>
</tr>
<tr>
<td>DOMAIN-REGEX</td>
<td>域名正则表达式匹配</td>
<td>^abc.*com</td>
</tr>
<tr>
<td>GEOSITE</td>
<td>匹配 Geosite 内的域名</td>
<td>youtube</td>
</tr>
<tr>
<td>IP-CIDR/IP-CIDR6</td>
<td>匹配 IP 地址范围</td>
<td>127.0.0.0/8</td>
</tr>
<tr>
<td>IP-SUFFIX</td>
<td>匹配 IP 后缀范围</td>
<td>8.8.8.8/24</td>
</tr>
<tr>
<td>IP-ASN</td>
<td>匹配 IP 所属 ASN</td>
<td>13335</td>
</tr>
<tr>
<td>GEOIP</td>
<td>匹配 IP 所属国家代码</td>
<td>CN</td>
</tr>
<tr>
<td>SRC-GEOIP</td>
<td>匹配来源 IP 所属国家代码</td>
<td>cn</td>
</tr>
<tr>
<td>SRC-IP-ASN</td>
<td>匹配来源 IP 所属 ASN</td>
<td>9808</td>
</tr>
<tr>
<td>SRC-IP-CIDR</td>
<td>匹配来源 IP 地址范围</td>
<td>192.168.1.201/32</td>
</tr>
<tr>
<td>SRC-IP-SUFFIX</td>
<td>匹配来源 IP 后缀范围</td>
<td>192.168.1.201/8</td>
</tr>
<tr>
<td>DST-PORT</td>
<td>匹配请求目标端口范围</td>
<td>80</td>
</tr>
<tr>
<td>SRC-PORT</td>
<td>匹配请求来源端口范围</td>
<td>7777</td>
</tr>
<tr>
<td>IN-PORT</td>
<td>匹配入站端口,可用端口范围</td>
<td>7890</td>
</tr>
<tr>
<td>IN-TYPE</td>
<td>匹配入站类型</td>
<td>SOCKS/HTTP</td>
</tr>
<tr>
<td>IN-USER</td>
<td>匹配入站用户名，支持使用 / 分隔多个用户名</td>
<td>linuxdo</td>
</tr>
<tr>
<td>IN-NAME</td>
<td>匹配入站名称</td>
<td>ss</td>
</tr>
<tr>
<td>PROCESS-PATH</td>
<td>使用完整进程路径匹配</td>
<td>D:\chrome.exe</td>
</tr>
<tr>
<td>PROCESS-PATH-REGEX</td>
<td>使用进程路径正则表达式匹配</td>
<td>*bin/wget</td>
</tr>
<tr>
<td>PROCESS-NAME</td>
<td>使用进程匹配，在Android平台可以匹配包名</td>
<td>chrome.exe</td>
</tr>
<tr>
<td>PROCESS-NAME-REGEX</td>
<td>使用进程名称正则表达式匹配，在Android平台可以匹配包名</td>
<td>curl$</td>
</tr>
<tr>
<td>UID</td>
<td>匹配 Linux USER ID</td>
<td>1001</td>
</tr>
<tr>
<td>NETWORK</td>
<td>匹配tcp或者udp</td>
<td>udp</td>
</tr>
<tr>
<td>DSCP</td>
<td>匹配DSCP标记 (仅限 tproxy udp 入站)</td>
<td>4</td>
</tr>
<tr>
<td>RULE-SET</td>
<td>引用规则集合，需配置rule-providers</td>
<td>providername</td>
</tr>
<tr>
<td>AND/OR/NOT</td>
<td>逻辑规则，需要注意括号的使用</td>
<td>((DOMAIN,baidu.com),(NETWORK,UDP))</td>
</tr>
<tr>
<td>SUB-RULE</td>
<td>匹配至子规则,需要注意括号的使用</td>
<td>(NETWORK,tcp)</td>
</tr>
<tr>
<td>MATCH</td>
<td>匹配所有请求，无需条件</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<blockquote>
<p>分流规则最终决定了哪个网站选用什么方式连接，通过不同的匹配策略自由地选择自己的分流规则。</p>
<p>优先级按照从上到下的顺序匹配，上面的优先级高于下面。</p>
</blockquote></div>
<div style="font-size:small;margin-top:8px;float:right;">❤️转载请注明出处❤️</div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://blog.52013120.xyz">繁星点点</a></div>
<div id="footer2">
    <span id="runday"></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("07/01/2024"!=""){
    var startSite=new Date("07/01/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);





document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'></script><script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>

</html>
